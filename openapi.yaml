openapi: 3.1.0
info:
  title: IFRS9 API
  version: 1.0.0
paths:
  /health:
    get:
      tags:
      - health
      summary: Health Check
      description: Check API health
      operationId: health_check_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /superadmin/tenants:
    post:
      tags:
      - superadmin
      summary: Onboard New Tenant
      description: 'Onboard a new Tenant:

        1. Creates the Tenant record.

        2. Creates the initial Admin User for that Tenant.

        3. (Optional) Assigns a default subscription plan.'
      operationId: onboard_new_tenant_superadmin_tenants_post
      security:
      - OAuth2PasswordBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantCreate'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
        '404':
          description: Not found
        '401':
          description: Not authenticated
        '409':
          description: Tenant slug already exists
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - superadmin
      summary: List All Tenants
      description: List all tenants with summary statistics (user count, portfolio
        count).
      operationId: list_all_tenants_superadmin_tenants_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 100
          title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TenantResponse'
                title: Response List All Tenants Superadmin Tenants Get
        '404':
          description: Not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /superadmin/tenants/{tenant_id}:
    get:
      tags:
      - superadmin
      summary: Get Tenant Details
      operationId: get_tenant_details_superadmin_tenants__tenant_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: integer
          title: Tenant Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
        '404':
          description: Not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /superadmin/tenants/{tenant_id}/status:
    patch:
      tags:
      - superadmin
      summary: Update Tenant Status
      description: 'Suspend or Activate a tenant.

        This effectively locks/unlocks all users in that tenant if your deps.py checks
        tenant.is_active.'
      operationId: update_tenant_status_superadmin_tenants__tenant_id__status_patch
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: integer
          title: Tenant Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /superadmin/stats:
    get:
      tags:
      - superadmin
      summary: Get Global System Stats
      description: 'High-level dashboard for the Super Admin.

        Aggregates data across ALL tenants.'
      operationId: get_global_system_stats_superadmin_stats_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemStats'
        '404':
          description: Not found
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /request-access:
    post:
      tags:
      - auth
      summary: Request Access
      description: Request user access by submitting email for verification
      operationId: request_access_request_access_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmailVerificationRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '409':
          description: Conflict - Email already registered or request exists
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /submit-admin-request:
    post:
      tags:
      - auth
      summary: Submit Admin Request
      description: Submit admin email for verified access request
      operationId: submit_admin_request_submit_admin_request_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccessRequestSubmit'
        required: true
      responses:
        '200':
          description: Admin request submitted
          content:
            application/json:
              schema: {}
        '401':
          description: Unauthorized
        '404':
          description: Verified email request not found
        '422':
          description: Invalid request data
        '500':
          description: Internal server error
  /admin/requests:
    get:
      tags:
      - admin
      summary: Get Access Requests
      description: Get all access requests
      operationId: list_all_access_requests
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/AccessRequestResponse'
                type: array
                title: Response List All Access Requests
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /register-tenant:
    post:
      tags:
      - auth
      summary: Register Tenant
      operationId: register_tenant_register_tenant_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantRegistrationRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
        '409':
          description: Organization with this name already exists.
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /login:
    post:
      tags:
      - auth
      summary: Login
      description: Login using email and password
      operationId: login_login_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: Unauthorized
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /verify-email/{token}:
    get:
      tags:
      - auth
      summary: Verify Email
      description: Enter email verification token to verify email address
      operationId: verify_email_verify_email__token__get
      parameters:
      - name: token
        in: path
        required: true
        schema:
          type: string
          title: Token
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Token not found
        '400':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /admin/requests/{request_id}:
    put:
      tags:
      - admin
      summary: Update Access Request
      description: Update access requests
      operationId: update_specific_access_request
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: request_id
        in: path
        required: true
        schema:
          type: integer
          title: Request Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccessRequestUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Request not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - admin
      summary: Delete Access Request
      description: Delete access requests
      operationId: delete_access_request_admin_requests__request_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: request_id
        in: path
        required: true
        schema:
          type: integer
          title: Request Id
      responses:
        '204':
          description: Successful Response
        '404':
          description: Request not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /set-password/{token}:
    post:
      tags:
      - auth
      summary: Set Password
      description: Set password using invitation token
      operationId: set_password_set_password__token__post
      parameters:
      - name: token
        in: path
        required: true
        schema:
          type: string
          title: Token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasswordSetup'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Token not found
        '400':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /billing/plans:
    get:
      tags:
      - billing
      summary: List Plans
      description: List all subscription plans
      operationId: list_plans_billing_plans_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: page
        in: query
        required: false
        schema:
          type: integer
          default: 1
          title: Page
      - name: per_page
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Per Page
      responses:
        '200':
          description: Customer details
          content:
            application/json:
              schema: {}
        '500':
          description: Paystack failure
        '502':
          description: External payment provider error
        '429':
          description: Rate limit exceeded
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /billing/customers:
    post:
      tags:
      - billing
      summary: Create Customer
      operationId: create_customer_billing_customers_post
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '502':
          description: Paystack unavailable
        '429':
          description: Rate limit exceeded
        '200':
          description: Customer details
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /billing/customers/me:
    get:
      tags:
      - billing
      summary: Get My Customer
      description: Fetch authenticated user's customer details
      operationId: get_my_customer_billing_customers_me_get
      responses:
        '200':
          description: Customer details
          content:
            application/json:
              schema: {}
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /billing/transactions/initialize:
    post:
      tags:
      - billing
      summary: Initialize Transaction
      description: Initialize a transaction (amount in kobo) using authenticated user's
        email
      operationId: initialize_transaction_billing_transactions_initialize_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransactionInitialize'
        required: true
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '500':
          description: Paystack failure
        '422':
          description: Paystack failure
        '200':
          description: Customer details
        '401':
          description: Not authenticated
        '400':
          description: Invalid amount
      security:
      - OAuth2PasswordBearer: []
  /billing/subscriptions/disable:
    post:
      tags:
      - billing
      summary: Disable Subscription
      description: Disable a subscription using subscription code and email token
      operationId: disable_subscription_billing_subscriptions_disable_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionDisable'
        required: true
      responses:
        '200':
          description: Customer details
          content:
            application/json:
              schema: {}
        '500':
          description: Paystack failure
        '502':
          description: External payment provider error
        '422':
          description: Invalid or missing parameters
        '400':
          description: Missing parameters
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /billing/subscriptions/enable:
    post:
      tags:
      - billing
      summary: Enable Subscription
      description: Disable a subscription using subscription code and email token
      operationId: enable_subscription_billing_subscriptions_enable_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionEnable'
        required: true
      responses:
        '200':
          description: Customer details
          content:
            application/json:
              schema: {}
        '500':
          description: Paystack failure
        '402':
          description: Payment required to enable subscription
        '404':
          description: Subscription not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
      - OAuth2PasswordBearer: []
  /billing/subscriptions:
    get:
      tags:
      - billing
      summary: Get Subscription
      description: Get current tenant's subscription details
      operationId: get_subscription_billing_subscriptions_get
      responses:
        '200':
          description: Subscription details
          content:
            application/json:
              schema: {}
        '404':
          description: No active subscription found
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /billing/transactions/verify/{reference}:
    get:
      tags:
      - billing
      summary: Verify Transaction
      description: Verify transaction by reference
      operationId: verify_transaction_billing_transactions_verify__reference__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: reference
        in: path
        required: true
        schema:
          type: string
          title: Reference
      responses:
        '200':
          description: Customer details
          content:
            application/json:
              schema: {}
        '500':
          description: Transaction not found
        '502':
          description: External payment provider error
        '400':
          description: Invalid transaction reference
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /webhooks/billing:
    post:
      tags:
      - webhooks
      summary: Paystack Webhook
      description: Handle Paystack webhook events
      operationId: paystack_webhook_webhooks_billing_post
      parameters:
      - name: x-paystack-signature
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: X-Paystack-Signature
      responses:
        '200':
          description: Webhook processed successfully
          content:
            application/json:
              schema: {}
        '400':
          description: Bad request
        '401':
          description: Unauthorized - invalid signature
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
  /admin/users:
    get:
      tags:
      - admin
      summary: Get Users
      description: Get all users in db
      operationId: get_users_admin_users_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/UserResponse'
                type: array
                title: Response Get Users Admin Users Get
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
    post:
      tags:
      - admin
      summary: Create User
      description: create a user in db
      operationId: create_user_admin_users_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreate'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '400':
          description: Email already registered
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
      - OAuth2PasswordBearer: []
  /admin/users/export:
    get:
      tags:
      - admin
      summary: Export Users Csv
      description: Get all users and export them as csv
      operationId: export_users_csv_admin_users_export_get
      responses:
        '200':
          description: Successful Response
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /admin/feedback:
    get:
      tags:
      - admin
      summary: Admin Get All Feedback
      description: Get all feedback entries
      operationId: admin_get_all_feedback_admin_feedback_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/FeedbackResponse'
                type: array
                title: Response Admin Get All Feedback Admin Feedback Get
        '401':
          description: Not authenticated
        '400':
          description: Failed to retrieve feedback entries
      security:
      - OAuth2PasswordBearer: []
  /admin/help:
    get:
      tags:
      - admin
      summary: Admin Get All Help
      description: Get all help entries
      operationId: admin_get_all_help_admin_help_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/HelpResponse'
                type: array
                title: Response Admin Get All Help Admin Help Get
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /admin/help/{help_id}:
    get:
      tags:
      - admin
      summary: Admin Get Help
      description: Get help entry by ID
      operationId: admin_get_help_admin_help__help_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: help_id
        in: path
        required: true
        schema:
          type: integer
          title: Help Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HelpResponse'
        '404':
          description: Help entry not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - admin
      summary: Admin Delete Help
      description: Delete a specific help entry by ID
      operationId: admin_delete_help_admin_help__help_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: help_id
        in: path
        required: true
        schema:
          type: integer
          title: Help Id
      responses:
        '204':
          description: Successful Response
        '404':
          description: Help not found
        '401':
          description: Not authenticated
        '500':
          description: Internal server error
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /admin/help/{help_id}/status:
    put:
      tags:
      - admin
      summary: Update Help Status
      description: Get help status by ID
      operationId: update_help_status_admin_help__help_id__status_put
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: help_id
        in: path
        required: true
        schema:
          type: integer
          title: Help Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HelpStatusUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HelpResponse'
        '404':
          description: Help not found
        '401':
          description: Not Authenticated
        '500':
          description: Internal server error
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /admin/users/{user_id}:
    get:
      tags:
      - admin
      summary: Get User
      description: Get a specific user by ID
      operationId: get_user_admin_users__user_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: integer
          title: User Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '404':
          description: User not found
        '401':
          description: Not authenticated
        '405':
          description: Method not allowed
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - admin
      summary: Update User
      operationId: update_user_admin_users__user_id__put
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: integer
          title: User Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '404':
          description: User not found
        '401':
          description: Not Aunthenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - admin
      summary: Delete User
      description: Delete a user by ID
      operationId: delete_user_admin_users__user_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: integer
          title: User Id
      responses:
        '204':
          description: Successful Response
        '404':
          description: User not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /admin/feedback/{feedback_id}:
    get:
      tags:
      - admin
      summary: Admin Get Feedback
      description: Get a specific feedback by ID
      operationId: admin_get_feedback_admin_feedback__feedback_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: feedback_id
        in: path
        required: true
        schema:
          type: integer
          title: Feedback Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackResponse'
        '404':
          description: Feedback not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - admin
      summary: Admin Delete Feedback
      description: Delete a feedback by ID
      operationId: admin_delete_feedback_admin_feedback__feedback_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: feedback_id
        in: path
        required: true
        schema:
          type: integer
          title: Feedback Id
      responses:
        '204':
          description: Successful Response
        '404':
          description: Feedback not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /admin/feedback/{feedback_id}/status:
    put:
      tags:
      - admin
      summary: Update Feedback Status
      description: Update a feedback status
      operationId: update_feedback_status_admin_feedback__feedback_id__status_put
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: feedback_id
        in: path
        required: true
        schema:
          type: integer
          title: Feedback Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FeedbackStatusUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackResponse'
        '404':
          description: Feedback not found
        '401':
          description: NOt Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/:
    post:
      tags:
      - portfolios
      summary: Create Portfolio
      description: Create a new portfolio for the current user.
      operationId: create_portfolio_portfolios__post
      security:
      - OAuth2PasswordBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PortfolioCreate'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PortfolioResponse'
        '401':
          description: Not authenticated
        '403':
          description: Subscription limit reached
        '402':
          description: Portfolio limit reached
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - portfolios
      summary: Get Portfolios
      description: Get all portfolios belonging to the current user.
      operationId: get_portfolios_portfolios__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 100
          title: Limit
      - name: asset_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Asset Type
      - name: customer_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Customer Type
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PortfolioList'
        '401':
          description: Not authenticated
        '500':
          description: Internal server error
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}:
    get:
      tags:
      - portfolios
      summary: Get Portfolio
      description: Get portfolio details with summary statistics and quality checks
        using ID
      operationId: get_portfolio_portfolios__portfolio_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PortfolioWithSummaryResponse'
        '404':
          description: Help request not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - portfolios
      summary: Update Portfolio
      description: Update details of a specific portfolio by ID.
      operationId: update_portfolio_portfolios__portfolio_id__put
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PortfolioUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PortfolioWithSummaryResponse'
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '500':
          description: Internal server error related to subscription
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - portfolios
      summary: Delete Portfolio
      description: Delete a portfolio by ID and return confirmation.
      operationId: delete_portfolio_portfolios__portfolio_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '204':
          description: Portfolio deleted successfully
        '401':
          description: Not authenticated
        '404':
          description: Portfolio not found
        '422':
          description: Validation error
  /portfolios/{portfolio_id}/ingest/save:
    post:
      tags:
      - portfolios
      summary: Accept Portfolio Data
      description: Accept and upload Excel files to MinIO, auto-extract headers, and
        return file info and extracted headers.
      operationId: accept_portfolio_data_portfolios__portfolio_id__ingest_save_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_accept_portfolio_data_portfolios__portfolio_id__ingest_save_post'
      responses:
        '200':
          description: Data saved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestAndSaveResponse'
        '400':
          description: There was an error parsing the body
        '401':
          description: Not authenticated
        '422':
          description: Validation error
        '404':
          description: Portfolio not found
        '500':
          description: Internal server error
  /portfolios/{portfolio_id}/ingest:
    post:
      tags:
      - portfolios
      summary: Ingest Portfolio Data
      description: Ingest cleaned Excel files from MinIO with mapping into the portfolio
        ingestion pipeline.
      operationId: ingest_portfolio_data_portfolios__portfolio_id__ingest_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngestPayload'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '400':
          description: There was an error parsing the body
        '500':
          description: Internal server error during ingestion
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/calculate-ecl:
    get:
      tags:
      - portfolios
      summary: Calculate Ecl Provision
      description: Calculate ECL provisions directly from a portfolio ID using latest
        staging data.
      operationId: calculate_ecl_provision_portfolios__portfolio_id__calculate_ecl_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: reporting_date
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: date
          - type: 'null'
          title: Reporting Date
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/stage-loans-ecl:
    post:
      tags:
      - portfolios
      summary: Stage Loans Ecl
      description: Stage loans for ECL calculation for a given portfolio ID.
      operationId: stage_loans_ecl_portfolios__portfolio_id__stage_loans_ecl_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/stage-loans-local:
    post:
      tags:
      - portfolios
      summary: Stage Loans Local
      description: Stage loans for local impairment calculation for a given portfolio
        ID.
      operationId: stage_loans_local_portfolios__portfolio_id__stage_loans_local_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/calculate-local-impairment:
    get:
      tags:
      - portfolios
      summary: Calculate Local Provision
      description: Calculate local impairment provisions directly from a portfolio
        ID using latest staging data.
      operationId: calculate_local_provision_portfolios__portfolio_id__calculate_local_impairment_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: reporting_date
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: date
          - type: 'null'
          title: Reporting Date
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /reports/{portfolio_id}/generate:
    post:
      tags:
      - reports
      summary: Generate Report
      description: Generate various types of reports for a portfolio
      operationId: generate_report_reports__portfolio_id__generate_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReportRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Portfolio not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /reports/{portfolio_id}/history:
    get:
      tags:
      - reports
      summary: Get Report History
      description: Get report history for a portfolio with optional filters
      operationId: get_report_history_reports__portfolio_id__history_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: report_type
        in: query
        required: false
        schema:
          anyOf:
          - $ref: '#/components/schemas/ReportTypeEnum'
          - type: 'null'
          title: Report Type
      - name: start_date
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: date
          - type: 'null'
          title: Start Date
      - name: end_date
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: date
          - type: 'null'
          title: End Date
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 20
          title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportHistoryList'
        '404':
          description: Portfolio not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /reports/{portfolio_id}/report/{report_id}:
    get:
      tags:
      - reports
      summary: Get Report
      description: Get a specific report by ID
      operationId: get_report_reports__portfolio_id__report__report_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: report_id
        in: path
        required: true
        schema:
          type: integer
          title: Report Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportResponse'
        '404':
          description: Portfolio or Report not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - reports
      summary: Delete Report
      description: Delete a specific report by ID
      operationId: delete_report_reports__portfolio_id__report__report_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: report_id
        in: path
        required: true
        schema:
          type: integer
          title: Report Id
      responses:
        '204':
          description: Successful Response
        '404':
          description: Portfolio or Report not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /reports/{portfolio_id}/report/{report_id}/download:
    get:
      tags:
      - reports
      summary: Download Report Excel
      description: Download a specific report as Excel
      operationId: download_report_excel_reports__portfolio_id__report__report_id__download_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: report_id
        in: path
        required: true
        schema:
          type: integer
          title: Report Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Portfolio or Report not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /reports/status/{report_id}:
    get:
      tags:
      - reports
      summary: Get Report Status
      description: Check status of a report generation
      operationId: get_report_status_reports_status__report_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: report_id
        in: path
        required: true
        schema:
          type: integer
          title: Report Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Report not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /dashboard:
    get:
      tags:
      - dashboard
      summary: Get Dashboard
      description: Get dashboard information including portfolio and customer overviews
      operationId: get_dashboard_dashboard_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /user/feedback:
    post:
      tags:
      - user actions
      summary: Create Feedback
      description: Create new feedback
      operationId: create_feedback_user_feedback_post
      security:
      - OAuth2PasswordBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FeedbackCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackResponse'
        '401':
          description: Not Aunthenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - user actions
      summary: Get All Feedback
      description: Get all feedback visible to regular users
      operationId: get_all_feedback_user_feedback_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: status
        in: query
        required: false
        schema:
          anyOf:
          - $ref: '#/components/schemas/FeedbackStatusEnum'
          - type: 'null'
          title: Status
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FeedbackResponse'
                title: Response Get All Feedback User Feedback Get
        '401':
          description: Not Aunthenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /user/feedback/mine:
    get:
      tags:
      - user actions
      summary: Get My Feedback
      description: Get all feedback submitted by the currently logged in user
      operationId: get_my_feedback_user_feedback_mine_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/FeedbackResponse'
                type: array
                title: Response Get My Feedback User Feedback Mine Get
        '401':
          description: Not Aunthenticated
      security:
      - OAuth2PasswordBearer: []
  /user/help:
    post:
      tags:
      - user actions
      summary: Create Help
      description: Create new help request
      operationId: create_help_user_help_post
      security:
      - OAuth2PasswordBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HelpCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HelpResponse'
        '401':
          description: Not Aunthenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - user actions
      summary: Get My Help
      description: Get all help requests for the current user
      operationId: get_my_help_user_help_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: status
        in: query
        required: false
        schema:
          anyOf:
          - $ref: '#/components/schemas/HelpStatusEnum'
          - type: 'null'
          title: Status
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HelpResponse'
                title: Response Get My Help User Help Get
        '401':
          description: Not Aunthenticated
        '500':
          description: Internal server error
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /user/notifications:
    get:
      tags:
      - user actions
      summary: Get Notifications
      description: Get notifications for the current user
      operationId: get_notifications_user_notifications_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/NotificationResponse'
                type: array
                title: Response Get Notifications User Notifications Get
        '401':
          description: Not Aunthenticated
      security:
      - OAuth2PasswordBearer: []
  /user/feedback/{feedback_id}:
    put:
      tags:
      - user actions
      summary: Update Feedback
      description: Update a specific feedback entry
      operationId: update_feedback_user_feedback__feedback_id__put
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: feedback_id
        in: path
        required: true
        schema:
          type: integer
          title: Feedback Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FeedbackUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackResponse'
        '404':
          description: Feedback not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - user actions
      summary: Delete Feedback
      description: Delete a specific feedback entry
      operationId: delete_feedback_user_feedback__feedback_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: feedback_id
        in: path
        required: true
        schema:
          type: integer
          title: Feedback Id
      responses:
        '204':
          description: Successful Response
        '404':
          description: Feedback not found
        '403':
          description: Forbidden
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - user actions
      summary: Get Feedback
      description: Get a specific feedback entry by ID
      operationId: get_feedback_user_feedback__feedback_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: feedback_id
        in: path
        required: true
        schema:
          type: integer
          title: Feedback Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackResponse'
        '404':
          description: Feedback not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /user/feedback/{feedback_id}/like:
    post:
      tags:
      - user actions
      summary: Like Feedback
      description: Like feedback or unlike if already liked
      operationId: like_feedback_user_feedback__feedback_id__like_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: feedback_id
        in: path
        required: true
        schema:
          type: integer
          title: Feedback Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackResponse'
        '404':
          description: Feedback not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /user/help/{help_id}:
    put:
      tags:
      - user actions
      summary: Update Help
      description: Update a specific help request
      operationId: update_help_user_help__help_id__put
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: help_id
        in: path
        required: true
        schema:
          type: integer
          title: Help Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HelpUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HelpResponse'
        '404':
          description: Help not found
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - user actions
      summary: Delete Help
      description: Delete a help request
      operationId: delete_help_user_help__help_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: help_id
        in: path
        required: true
        schema:
          type: integer
          title: Help Id
      responses:
        '204':
          description: Successful Response
        '404':
          description: Help not found
        '403':
          description: Forbidden
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - user actions
      summary: Get Help
      description: Get a specific help request by ID
      operationId: get_help_user_help__help_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: help_id
        in: path
        required: true
        schema:
          type: integer
          title: Help Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HelpResponse'
        '404':
          description: Help not found
        '403':
          description: Forbidden
        '401':
          description: Not Authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/quality-issues:
    get:
      tags:
      - quality-issues
      summary: Get Quality Issues
      description: Get all quality issues for a specific portfolio
      operationId: get_quality_issues_portfolios__portfolio_id__quality_issues_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: status_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Status Type
      - name: issue_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Issue Type
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/QualityIssueResponse'
                title: Response Get Quality Issues Portfolios  Portfolio Id  Quality
                  Issues Get
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/quality-issues/download:
    get:
      tags:
      - quality-issues
      summary: Download All Quality Issues Excel
      description: Download all quality issues for a portfolio as Excel
      operationId: download_all_quality_issues_excel_portfolios__portfolio_id__quality_issues_download_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: status_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Status Type
      - name: issue_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Issue Type
      - name: include_comments
        in: query
        required: false
        schema:
          type: boolean
          description: Include comments in the download
          default: false
          title: Include Comments
        description: Include comments in the download
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/quality-issues/{issue_id}:
    get:
      tags:
      - quality-issues
      summary: Get Quality Issue
      description: Retrieve specific quality issues for a particular portfolio
      operationId: get_quality_issue_portfolios__portfolio_id__quality_issues__issue_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: issue_id
        in: path
        required: true
        schema:
          type: integer
          title: Issue Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QualityIssueResponse'
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - quality-issues
      summary: Update Quality Issue
      description: Update quality issues including approving them
      operationId: update_quality_issue_portfolios__portfolio_id__quality_issues__issue_id__put
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: issue_id
        in: path
        required: true
        schema:
          type: integer
          title: Issue Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QualityIssueUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QualityIssueResponse'
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/quality-issues/{issue_id}/comments:
    post:
      tags:
      - quality-issues
      summary: Add Comment To Quality Issue
      description: Add a comment to a quality issue
      operationId: add_comment_to_quality_issue_portfolios__portfolio_id__quality_issues__issue_id__comments_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: issue_id
        in: path
        required: true
        schema:
          type: integer
          title: Issue Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QualityIssueCommentCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QualityIssueCommentModel'
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - quality-issues
      summary: Get Quality Issue Comments
      description: Get all comments for a quality issue
      operationId: get_quality_issue_comments_portfolios__portfolio_id__quality_issues__issue_id__comments_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: issue_id
        in: path
        required: true
        schema:
          type: integer
          title: Issue Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/QualityIssueCommentModel'
                title: Response Get Quality Issue Comments Portfolios  Portfolio Id  Quality
                  Issues  Issue Id  Comments Get
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/quality-issues/{issue_id}/comments/{comment_id}:
    put:
      tags:
      - quality-issues
      summary: Edit Quality Issue Comment
      description: Edit a comment on a quality issue
      operationId: edit_quality_issue_comment_portfolios__portfolio_id__quality_issues__issue_id__comments__comment_id__put
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: issue_id
        in: path
        required: true
        schema:
          type: integer
          title: Issue Id
      - name: comment_id
        in: path
        required: true
        schema:
          type: integer
          title: Comment Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QualityIssueCommentCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QualityIssueCommentModel'
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/quality-issues/{issue_id}/approve:
    post:
      tags:
      - quality-issues
      summary: Approve Quality Issue
      description: Approve a quality issue
      operationId: approve_quality_issue_portfolios__portfolio_id__quality_issues__issue_id__approve_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: issue_id
        in: path
        required: true
        schema:
          type: integer
          title: Issue Id
      - name: comment
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Comment
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QualityIssueResponse'
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/approve-all-quality-issues:
    post:
      tags:
      - quality-issues
      summary: Approve All Quality Issues
      description: Approve all open quality issues for a portfolio at once
      operationId: approve_all_quality_issues_portfolios__portfolio_id__approve_all_quality_issues_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: comment
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Comment
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Approve All Quality Issues Portfolios  Portfolio Id  Approve
                  All Quality Issues Post
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/recheck-quality:
    post:
      tags:
      - quality-issues
      summary: Recheck Quality Issues
      description: Run quality checks again to find any new issues.
      operationId: recheck_quality_issues_portfolios__portfolio_id__recheck_quality_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QualityCheckSummary'
        '404':
          description: Portfolio not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /portfolios/{portfolio_id}/quality-issues/{issue_id}/download:
    get:
      tags:
      - quality-issues
      summary: Download Quality Issue Excel
      description: Download a specific quality issue as Excel
      operationId: download_quality_issue_excel_portfolios__portfolio_id__quality_issues__issue_id__download_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: portfolio_id
        in: path
        required: true
        schema:
          type: integer
          title: Portfolio Id
      - name: issue_id
        in: path
        required: true
        schema:
          type: integer
          title: Issue Id
      - name: include_comments
        in: query
        required: false
        schema:
          type: boolean
          description: Include comments in the download
          default: true
          title: Include Comments
        description: Include comments in the download
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '404':
          description: Portfolio not found
        '401':
          description: Not Aunthenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /:
    get:
      tags:
      - root
      summary: Root
      description: Check API root
      operationId: root__get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /token:
    post:
      tags:
      - token
      summary: Get Token
      description: Get authentication token
      operationId: get_token_token_post
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Body_get_token_token_post'
        required: true
      responses:
        '200':
          description: Token generated successfully
          content:
            application/json:
              schema: {}
        '401':
          description: Unauthorized
        '422':
          description: Validation error
        '500':
          description: Internal server error
components:
  schemas:
    AccessRequestResponse:
      properties:
        id:
          type: integer
          title: Id
        email:
          type: string
          format: email
          title: Email
        admin_email:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: Admin Email
        status:
          type: string
          title: Status
        created_at:
          type: string
          format: date-time
          title: Created At
        is_email_verified:
          type: boolean
          title: Is Email Verified
      type: object
      required:
      - id
      - email
      - status
      - created_at
      - is_email_verified
      title: AccessRequestResponse
    AccessRequestSubmit:
      properties:
        email:
          type: string
          format: email
          title: Email
        admin_email:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: Admin Email
      type: object
      required:
      - email
      title: AccessRequestSubmit
    AccessRequestUpdate:
      properties:
        status:
          $ref: '#/components/schemas/RequestStatus'
        role:
          anyOf:
          - $ref: '#/components/schemas/UserRole'
          - type: 'null'
      type: object
      required:
      - status
      title: AccessRequestUpdate
    AssetType:
      type: string
      enum:
      - equity
      - debt
      title: AssetType
    Body_accept_portfolio_data_portfolios__portfolio_id__ingest_save_post:
      properties:
        loan_details:
          anyOf:
          - type: string
            format: binary
          - type: 'null'
          title: Loan Details
        client_data:
          anyOf:
          - type: string
            format: binary
          - type: 'null'
          title: Client Data
        loan_guarantee_data:
          anyOf:
          - type: string
            format: binary
          - type: 'null'
          title: Loan Guarantee Data
        loan_collateral_data:
          anyOf:
          - type: string
            format: binary
          - type: 'null'
          title: Loan Collateral Data
      type: object
      title: Body_accept_portfolio_data_portfolios__portfolio_id__ingest_save_post
    Body_get_token_token_post:
      properties:
        grant_type:
          anyOf:
          - type: string
            pattern: ^password$
          - type: 'null'
          title: Grant Type
        username:
          type: string
          title: Username
        password:
          type: string
          title: Password
        scope:
          type: string
          title: Scope
          default: ''
        client_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Client Id
        client_secret:
          anyOf:
          - type: string
          - type: 'null'
          title: Client Secret
      type: object
      required:
      - username
      - password
      title: Body_get_token_token_post
    CalculationSummary:
      properties:
        ecl:
          anyOf:
          - $ref: '#/components/schemas/ECLCalculationDetail'
          - type: 'null'
        local_impairment:
          anyOf:
          - $ref: '#/components/schemas/LocalImpairmentDetail'
          - type: 'null'
        total_loan_value:
          type: number
          title: Total Loan Value
          default: 0
      type: object
      title: CalculationSummary
      description: Summary of calculation results for a portfolio
    CategoryData:
      properties:
        num_loans:
          type: integer
          title: Num Loans
        total_loan_value:
          type: number
          title: Total Loan Value
        provision_amount:
          type: number
          title: Provision Amount
      type: object
      required:
      - num_loans
      - total_loan_value
      - provision_amount
      title: CategoryData
    ClientDataFile:
      properties:
        file_id:
          type: string
          title: File Id
        file_url:
          type: string
          title: File Url
        object_name:
          type: string
          title: Object Name
        excel_columns:
          items:
            type: string
          type: array
          title: Excel Columns
        model_columns:
          items:
            type: string
          type: array
          title: Model Columns
        row_count:
          anyOf:
          - type: integer
          - type: 'null'
          title: Row Count
      type: object
      required:
      - file_id
      - file_url
      - object_name
      - excel_columns
      - model_columns
      title: ClientDataFile
    CustomerSummaryModel:
      properties:
        individual_customers:
          type: integer
          title: Individual Customers
        institutions:
          type: integer
          title: Institutions
        mixed:
          type: integer
          title: Mixed
        active_customers:
          type: integer
          title: Active Customers
      type: object
      required:
      - individual_customers
      - institutions
      - mixed
      - active_customers
      title: CustomerSummaryModel
    CustomerType:
      type: string
      enum:
      - individuals
      - institution
      - mixed
      title: CustomerType
    DataSource:
      type: string
      enum:
      - connect to external application
      - upload data
      title: DataSource
    DaysRangeConfig:
      properties:
        days_range:
          type: string
          title: Days Range
          example: 0-30
      type: object
      required:
      - days_range
      title: DaysRangeConfig
    ECLCalculationDetail:
      properties:
        Stage 1:
          anyOf:
          - $ref: '#/components/schemas/CategoryData'
          - type: 'null'
        Stage 2:
          anyOf:
          - $ref: '#/components/schemas/CategoryData'
          - type: 'null'
        Stage 3:
          anyOf:
          - $ref: '#/components/schemas/CategoryData'
          - type: 'null'
        total_provision:
          type: number
          title: Total Provision
          default: 0
        provision_percentage:
          anyOf:
          - type: number
          - type: 'null'
          title: Provision Percentage
          default: 0
        calculation_date:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Calculation Date
      type: object
      title: ECLCalculationDetail
      description: Detailed ECL calculation results for a portfolio
    ECLStagingConfig:
      properties:
        stage_1:
          $ref: '#/components/schemas/DaysRangeConfig'
        stage_2:
          $ref: '#/components/schemas/DaysRangeConfig'
        stage_3:
          $ref: '#/components/schemas/DaysRangeConfig'
      type: object
      required:
      - stage_1
      - stage_2
      - stage_3
      title: ECLStagingConfig
    ECLStagingSummary:
      properties:
        Stage 1:
          anyOf:
          - $ref: '#/components/schemas/StagingSummaryStageData'
          - type: 'null'
        Stage 2:
          anyOf:
          - $ref: '#/components/schemas/StagingSummaryStageData'
          - type: 'null'
        Stage 3:
          anyOf:
          - $ref: '#/components/schemas/StagingSummaryStageData'
          - type: 'null'
        config:
          anyOf:
          - $ref: '#/components/schemas/ECLStagingConfig'
          - type: 'null'
        staging_date:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Staging Date
      type: object
      title: ECLStagingSummary
      description: Summary of ECL staging results
    EmailVerificationRequest:
      properties:
        email:
          type: string
          format: email
          title: Email
      type: object
      required:
      - email
      title: EmailVerificationRequest
    FeedbackCreate:
      properties:
        description:
          type: string
          minLength: 3
          title: Description
      type: object
      required:
      - description
      title: FeedbackCreate
      description: Schema for creating new feedback
    FeedbackResponse:
      properties:
        description:
          type: string
          minLength: 3
          title: Description
        id:
          type: integer
          title: Id
        status:
          $ref: '#/components/schemas/FeedbackStatusEnum'
        user_id:
          type: integer
          title: User Id
        user:
          anyOf:
          - $ref: '#/components/schemas/UserBasic'
          - type: 'null'
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Updated At
        is_creator:
          type: boolean
          title: Is Creator
        like_count:
          type: integer
          title: Like Count
          default: 0
        is_liked_by_user:
          type: boolean
          title: Is Liked By User
          default: false
      type: object
      required:
      - description
      - id
      - status
      - user_id
      - created_at
      - is_creator
      title: FeedbackResponse
      description: Schema for feedback response
    FeedbackStatusEnum:
      type: string
      enum:
      - submitted
      - open
      - closed
      - returned
      - in development
      - completed
      title: FeedbackStatusEnum
    FeedbackStatusUpdate:
      properties:
        status:
          $ref: '#/components/schemas/FeedbackStatusEnum'
      type: object
      required:
      - status
      title: FeedbackStatusUpdate
      description: Schema for updating feedback status
    FeedbackUpdate:
      properties:
        description:
          anyOf:
          - type: string
            minLength: 3
          - type: 'null'
          title: Description
      type: object
      title: FeedbackUpdate
      description: Schema for updating existing feedback
    FileMapping:
      properties:
        type:
          type: string
          title: Type
          description: Type of the file, e.g., loan_details, client_data
        object_name:
          type: string
          title: Object Name
          description: MinIO object key / file path
        mapping:
          additionalProperties:
            type: string
          type: object
          title: Mapping
          description: Excel column to model column mapping
      type: object
      required:
      - type
      - object_name
      - mapping
      title: FileMapping
    FundingSource:
      type: string
      enum:
      - private investors
      - pension fund
      - mutual fund
      - other funds
      title: FundingSource
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    HelpCreate:
      properties:
        description:
          type: string
          minLength: 10
          title: Description
      type: object
      required:
      - description
      title: HelpCreate
    HelpResponse:
      properties:
        description:
          type: string
          minLength: 10
          title: Description
        id:
          type: integer
          title: Id
        user_id:
          type: integer
          title: User Id
        status:
          $ref: '#/components/schemas/HelpStatusEnum'
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Updated At
        user:
          anyOf:
          - $ref: '#/components/schemas/UserBase'
          - type: 'null'
        is_creator:
          type: boolean
          title: Is Creator
      type: object
      required:
      - description
      - id
      - user_id
      - status
      - created_at
      - is_creator
      title: HelpResponse
    HelpStatusEnum:
      type: string
      enum:
      - submitted
      - open
      - closed
      - returned
      - in development
      - completed
      title: HelpStatusEnum
    HelpStatusUpdate:
      properties:
        status:
          $ref: '#/components/schemas/HelpStatusEnum'
      type: object
      required:
      - status
      title: HelpStatusUpdate
      description: Schema for updating the status of a help request (admin only)
    HelpUpdate:
      properties:
        description:
          anyOf:
          - type: string
            minLength: 10
          - type: 'null'
          title: Description
      type: object
      title: HelpUpdate
    ImpairmentCategory:
      properties:
        days_range:
          type: string
          title: Days Range
        rate:
          type: number
          title: Rate
      type: object
      required:
      - days_range
      - rate
      title: ImpairmentCategory
      description: Configuration for an impairment category
    IngestAndSaveResponse:
      properties:
        portfolio_id:
          type: integer
          title: Portfolio Id
        uploaded_files:
          $ref: '#/components/schemas/UploadedFiles'
        message:
          type: string
          title: Message
      type: object
      required:
      - portfolio_id
      - uploaded_files
      - message
      title: IngestAndSaveResponse
    IngestPayload:
      properties:
        files:
          items:
            $ref: '#/components/schemas/FileMapping'
          type: array
          title: Files
          description: List of files to ingest with mappings
      type: object
      required:
      - files
      title: IngestPayload
    LoanCollateralDataFile:
      properties:
        file_id:
          type: string
          title: File Id
        file_url:
          type: string
          title: File Url
        object_name:
          type: string
          title: Object Name
        excel_columns:
          items:
            type: string
          type: array
          title: Excel Columns
        model_columns:
          items:
            type: string
          type: array
          title: Model Columns
      type: object
      required:
      - file_id
      - file_url
      - object_name
      - excel_columns
      - model_columns
      title: LoanCollateralDataFile
    LoanDetailsFile:
      properties:
        file_id:
          type: string
          title: File Id
        file_url:
          type: string
          title: File Url
        object_name:
          type: string
          title: Object Name
        excel_columns:
          items:
            type: string
          type: array
          title: Excel Columns
        model_columns:
          items:
            type: string
          type: array
          title: Model Columns
        row_count:
          anyOf:
          - type: integer
          - type: 'null'
          title: Row Count
      type: object
      required:
      - file_id
      - file_url
      - object_name
      - excel_columns
      - model_columns
      title: LoanDetailsFile
    LoanGuaranteeDataFile:
      properties:
        file_id:
          type: string
          title: File Id
        file_url:
          type: string
          title: File Url
        object_name:
          type: string
          title: Object Name
        excel_columns:
          items:
            type: string
          type: array
          title: Excel Columns
        model_columns:
          items:
            type: string
          type: array
          title: Model Columns
      type: object
      required:
      - file_id
      - file_url
      - object_name
      - excel_columns
      - model_columns
      title: LoanGuaranteeDataFile
    LocalImpairmentConfig:
      properties:
        current:
          $ref: '#/components/schemas/ImpairmentCategory'
        olem:
          $ref: '#/components/schemas/ImpairmentCategory'
        substandard:
          $ref: '#/components/schemas/ImpairmentCategory'
        doubtful:
          $ref: '#/components/schemas/ImpairmentCategory'
        loss:
          $ref: '#/components/schemas/ImpairmentCategory'
      type: object
      required:
      - current
      - olem
      - substandard
      - doubtful
      - loss
      title: LocalImpairmentConfig
    LocalImpairmentDetail:
      properties:
        Current:
          anyOf:
          - $ref: '#/components/schemas/CategoryData'
          - type: 'null'
        OLEM:
          anyOf:
          - $ref: '#/components/schemas/CategoryData'
          - type: 'null'
        Substandard:
          anyOf:
          - $ref: '#/components/schemas/CategoryData'
          - type: 'null'
        Doubtful:
          anyOf:
          - $ref: '#/components/schemas/CategoryData'
          - type: 'null'
        Loss:
          anyOf:
          - $ref: '#/components/schemas/CategoryData'
          - type: 'null'
        total_provision:
          type: number
          title: Total Provision
          default: 0
        provision_percentage:
          type: number
          title: Provision Percentage
          default: 0
        calculation_date:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Calculation Date
      type: object
      title: LocalImpairmentDetail
      description: Detailed local impairment calculation results for a portfolio
    LocalImpairmentStagingSummary:
      properties:
        Current:
          anyOf:
          - $ref: '#/components/schemas/StagingSummaryStageData'
          - type: 'null'
        OLEM:
          anyOf:
          - $ref: '#/components/schemas/StagingSummaryStageData'
          - type: 'null'
        Substandard:
          anyOf:
          - $ref: '#/components/schemas/StagingSummaryStageData'
          - type: 'null'
        Doubtful:
          anyOf:
          - $ref: '#/components/schemas/StagingSummaryStageData'
          - type: 'null'
        Loss:
          anyOf:
          - $ref: '#/components/schemas/StagingSummaryStageData'
          - type: 'null'
        staging_date:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Staging Date
        config:
          anyOf:
          - $ref: '#/components/schemas/LocalImpairmentConfig'
          - type: 'null'
      type: object
      title: LocalImpairmentStagingSummary
      description: Summary of local impairment staging results
    LoginRequest:
      properties:
        email:
          type: string
          format: email
          title: Email
        password:
          type: string
          title: Password
      type: object
      required:
      - email
      - password
      title: LoginRequest
    LoginResponse:
      properties:
        access_token:
          type: string
          title: Access Token
        token_type:
          type: string
          pattern: ^bearer$
          title: Token Type
          default: bearer
        expires_in:
          type: integer
          exclusiveMinimum: 0.0
          title: Expires In
        user:
          $ref: '#/components/schemas/UserModel'
      type: object
      required:
      - access_token
      - expires_in
      - user
      title: LoginResponse
    NotificationResponse:
      properties:
        id:
          type: integer
          title: Id
        text:
          type: string
          title: Text
        type:
          $ref: '#/components/schemas/NotificationTypeEnum'
        time_ago:
          type: string
          title: Time Ago
        created_at:
          type: string
          format: date-time
          title: Created At
      type: object
      required:
      - id
      - text
      - type
      - time_ago
      - created_at
      title: NotificationResponse
    NotificationTypeEnum:
      type: string
      enum:
      - SYSTEM
      - FEEDBACK
      - HELP
      - CALCULATION
      - REPORT
      - DATA_UPLOAD
      title: NotificationTypeEnum
    OverviewModel:
      properties:
        total_loans:
          type: integer
          title: Total Loans
        total_loan_value:
          type: number
          title: Total Loan Value
        average_loan_amount:
          type: number
          title: Average Loan Amount
        total_customers:
          type: integer
          title: Total Customers
      type: object
      required:
      - total_loans
      - total_loan_value
      - average_loan_amount
      - total_customers
      title: OverviewModel
    PasswordSetup:
      properties:
        password:
          type: string
          minLength: 8
          title: Password
          example: MyS3cur3Pwd
        confirm_password:
          type: string
          minLength: 8
          title: Confirm Password
          example: MyS3cur3Pwd
      type: object
      required:
      - password
      - confirm_password
      title: PasswordSetup
    PortfolioCreate:
      properties:
        name:
          type: string
          title: Name
        description:
          type: string
          title: Description
        asset_type:
          $ref: '#/components/schemas/AssetType'
        customer_type:
          $ref: '#/components/schemas/CustomerType'
        funding_source:
          $ref: '#/components/schemas/FundingSource'
        data_source:
          $ref: '#/components/schemas/DataSource'
        repayment_source:
          type: boolean
          title: Repayment Source
          default: false
      type: object
      required:
      - name
      - description
      - asset_type
      - customer_type
      - funding_source
      - data_source
      title: PortfolioCreate
    PortfolioList:
      properties:
        items:
          items:
            $ref: '#/components/schemas/PortfolioResponse'
          type: array
          title: Items
        total:
          type: integer
          title: Total
      type: object
      required:
      - items
      - total
      title: PortfolioList
    PortfolioResponse:
      properties:
        id:
          type: integer
          title: Id
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
          default: ''
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
          default: ''
        asset_type:
          anyOf:
          - type: string
          - type: 'null'
          title: Asset Type
          default: ''
        customer_type:
          anyOf:
          - type: string
          - type: 'null'
          title: Customer Type
          default: ''
        funding_source:
          anyOf:
          - type: string
          - type: 'null'
          title: Funding Source
          default: ''
        data_source:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Source
          default: ''
        repayment_source:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Repayment Source
          default: false
        credit_risk_reserve:
          anyOf:
          - type: string
          - type: 'null'
          title: Credit Risk Reserve
        loan_assets:
          anyOf:
          - type: string
          - type: 'null'
          title: Loan Assets
        ecl_impairment_account:
          anyOf:
          - type: string
          - type: 'null'
          title: Ecl Impairment Account
        user_id:
          type: integer
          title: User Id
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Updated At
        ecl_staging_config:
          anyOf:
          - $ref: '#/components/schemas/ECLStagingConfig'
          - type: 'null'
        bog_staging_config:
          anyOf:
          - $ref: '#/components/schemas/LocalImpairmentConfig'
          - type: 'null'
        has_ingested_data:
          type: boolean
          title: Has Ingested Data
          default: false
        has_calculated_ecl:
          type: boolean
          title: Has Calculated Ecl
          default: false
        has_calculated_local_impairment:
          type: boolean
          title: Has Calculated Local Impairment
          default: false
        has_all_issues_approved:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Has All Issues Approved
      type: object
      required:
      - id
      - user_id
      - created_at
      title: PortfolioResponse
    PortfolioUpdate:
      properties:
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        asset_type:
          anyOf:
          - $ref: '#/components/schemas/AssetType'
          - type: 'null'
        customer_type:
          anyOf:
          - $ref: '#/components/schemas/CustomerType'
          - type: 'null'
        funding_source:
          anyOf:
          - $ref: '#/components/schemas/FundingSource'
          - type: 'null'
        data_source:
          anyOf:
          - $ref: '#/components/schemas/DataSource'
          - type: 'null'
        repayment_source:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Repayment Source
        credit_risk_reserve:
          anyOf:
          - type: string
          - type: 'null'
          title: Credit Risk Reserve
        loan_assets:
          anyOf:
          - type: string
          - type: 'null'
          title: Loan Assets
        ecl_impairment_account:
          anyOf:
          - type: string
          - type: 'null'
          title: Ecl Impairment Account
        ecl_staging_config:
          anyOf:
          - $ref: '#/components/schemas/ECLStagingConfig'
          - type: 'null'
        bog_staging_config:
          anyOf:
          - $ref: '#/components/schemas/LocalImpairmentConfig'
          - type: 'null'
      type: object
      title: PortfolioUpdate
    PortfolioWithSummaryResponse:
      properties:
        id:
          type: integer
          title: Id
        name:
          type: string
          title: Name
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        asset_type:
          anyOf:
          - type: string
          - type: 'null'
          title: Asset Type
        customer_type:
          anyOf:
          - type: string
          - type: 'null'
          title: Customer Type
        funding_source:
          anyOf:
          - type: string
          - type: 'null'
          title: Funding Source
        data_source:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Source
        repayment_source:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Repayment Source
        ecl_staging_config:
          anyOf:
          - $ref: '#/components/schemas/ECLStagingConfig'
          - type: 'null'
        bog_staging_config:
          anyOf:
          - $ref: '#/components/schemas/LocalImpairmentConfig'
          - type: 'null'
        credit_risk_reserve:
          anyOf:
          - type: string
          - type: 'null'
          title: Credit Risk Reserve
        loan_assets:
          anyOf:
          - type: string
          - type: 'null'
          title: Loan Assets
        ecl_impairment_account:
          anyOf:
          - type: string
          - type: 'null'
          title: Ecl Impairment Account
        has_ingested_data:
          type: boolean
          title: Has Ingested Data
        has_calculated_ecl:
          type: boolean
          title: Has Calculated Ecl
        has_calculated_local_impairment:
          type: boolean
          title: Has Calculated Local Impairment
        has_all_issues_approved:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Has All Issues Approved
        updated_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Updated At
        overview:
          $ref: '#/components/schemas/OverviewModel'
        customer_summary:
          $ref: '#/components/schemas/CustomerSummaryModel'
        quality_check:
          anyOf:
          - $ref: '#/components/schemas/QualityCheckSummary'
          - type: 'null'
        quality_issues:
          anyOf:
          - items:
              $ref: '#/components/schemas/QualityIssueResponse'
            type: array
          - type: 'null'
          title: Quality Issues
        report_history:
          anyOf:
          - items:
              $ref: '#/components/schemas/ReportHistoryItem'
            type: array
          - type: 'null'
          title: Report History
        calculation_summary:
          anyOf:
          - $ref: '#/components/schemas/CalculationSummary'
          - type: 'null'
        staging_summary:
          anyOf:
          - $ref: '#/components/schemas/StagingSummary'
          - type: 'null'
      type: object
      required:
      - id
      - name
      - has_ingested_data
      - has_calculated_ecl
      - has_calculated_local_impairment
      - overview
      - customer_summary
      title: PortfolioWithSummaryResponse
    QualityCheckSummary:
      properties:
        duplicate_customer_ids:
          type: integer
          title: Duplicate Customer Ids
          default: 0
        duplicate_addresses:
          type: integer
          title: Duplicate Addresses
          default: 0
        duplicate_dob:
          type: integer
          title: Duplicate Dob
          default: 0
        duplicate_loan_ids:
          type: integer
          title: Duplicate Loan Ids
          default: 0
        unmatched_employee_ids:
          type: integer
          title: Unmatched Employee Ids
          default: 0
        loan_customer_mismatches:
          type: integer
          title: Loan Customer Mismatches
          default: 0
        missing_dob:
          type: integer
          title: Missing Dob
          default: 0
        total_issues:
          type: integer
          title: Total Issues
          default: 0
        high_severity_issues:
          type: integer
          title: High Severity Issues
          default: 0
        open_issues:
          type: integer
          title: Open Issues
          default: 0
      type: object
      title: QualityCheckSummary
      description: Quality check summary with counts of different types of issues.
    QualityIssueCommentCreate:
      properties:
        comment:
          type: string
          title: Comment
      type: object
      required:
      - comment
      title: QualityIssueCommentCreate
    QualityIssueCommentModel:
      properties:
        id:
          type: integer
          title: Id
        quality_issue_id:
          type: integer
          title: Quality Issue Id
        user_id:
          type: integer
          title: User Id
        comment:
          type: string
          title: Comment
        created_at:
          type: string
          format: date-time
          title: Created At
      type: object
      required:
      - id
      - quality_issue_id
      - user_id
      - comment
      - created_at
      title: QualityIssueCommentModel
    QualityIssueResponse:
      properties:
        id:
          type: integer
          title: Id
        portfolio_id:
          type: integer
          title: Portfolio Id
        issue_type:
          type: string
          title: Issue Type
        description:
          type: string
          title: Description
        affected_records:
          items:
            type: object
          type: array
          title: Affected Records
        severity:
          type: string
          title: Severity
        status:
          type: string
          title: Status
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Updated At
      type: object
      required:
      - id
      - portfolio_id
      - issue_type
      - description
      - affected_records
      - severity
      - status
      - created_at
      title: QualityIssueResponse
    QualityIssueUpdate:
      properties:
        status:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        severity:
          anyOf:
          - type: string
          - type: 'null'
          title: Severity
      type: object
      title: QualityIssueUpdate
    ReportHistoryItem:
      properties:
        id:
          type: integer
          title: Id
        report_type:
          type: string
          title: Report Type
        report_date:
          type: string
          format: date
          title: Report Date
        report_name:
          type: string
          title: Report Name
        created_at:
          type: string
          format: date-time
          title: Created At
      type: object
      required:
      - id
      - report_type
      - report_date
      - report_name
      - created_at
      title: ReportHistoryItem
    ReportHistoryList:
      properties:
        items:
          items:
            $ref: '#/components/schemas/ReportHistoryItem'
          type: array
          title: Items
        total:
          type: integer
          title: Total
      type: object
      required:
      - items
      - total
      title: ReportHistoryList
    ReportRequest:
      properties:
        report_date:
          type: string
          format: date
          title: Report Date
        report_type:
          $ref: '#/components/schemas/ReportTypeEnum'
      type: object
      required:
      - report_date
      - report_type
      title: ReportRequest
    ReportResponse:
      properties:
        report_type:
          $ref: '#/components/schemas/ReportTypeEnum'
        report_date:
          type: string
          format: date
          title: Report Date
        report_name:
          type: string
          title: Report Name
        id:
          type: integer
          title: Id
        portfolio_id:
          type: integer
          title: Portfolio Id
        created_at:
          type: string
          format: date-time
          title: Created At
        created_by:
          type: integer
          title: Created By
        report_data:
          type: object
          title: Report Data
      type: object
      required:
      - report_type
      - report_date
      - report_name
      - id
      - portfolio_id
      - created_at
      - created_by
      - report_data
      title: ReportResponse
    ReportTypeEnum:
      type: string
      enum:
      - ecl_detailed_report
      - ecl_report_summarised_by_stages
      - BOG_impairment_detailed_report
      - BOG_impairmnt_summary_by_stages
      - journals_report
      title: ReportTypeEnum
    RequestStatus:
      type: string
      enum:
      - pending
      - approved
      - denied
      - flagged
      title: RequestStatus
    StagingSummary:
      properties:
        ecl:
          anyOf:
          - $ref: '#/components/schemas/ECLStagingSummary'
          - type: 'null'
        local_impairment:
          anyOf:
          - $ref: '#/components/schemas/LocalImpairmentStagingSummary'
          - type: 'null'
      type: object
      title: StagingSummary
      description: Combined staging summary for both ECL and local impairment
    StagingSummaryStageData:
      properties:
        num_loans:
          type: integer
          title: Num Loans
        outstanding_loan_balance:
          type: number
          title: Outstanding Loan Balance
      type: object
      required:
      - num_loans
      - outstanding_loan_balance
      title: StagingSummaryStageData
      description: Data about loans in a specific stage
    SubscriptionDisable:
      properties:
        code:
          type: string
          title: Code
          description: Subscription code
        token:
          type: string
          title: Token
          description: Email token
      type: object
      required:
      - code
      - token
      title: SubscriptionDisable
    SubscriptionEnable:
      properties:
        code:
          type: string
          title: Code
          description: Subscription code
        token:
          type: string
          title: Token
          description: Email token
      type: object
      required:
      - code
      - token
      title: SubscriptionEnable
    SystemStats:
      properties:
        total_tenants:
          type: integer
          title: Total Tenants
        total_users:
          type: integer
          title: Total Users
        total_portfolios:
          type: integer
          title: Total Portfolios
        total_loans:
          type: integer
          title: Total Loans
        total_value_locked:
          type: number
          title: Total Value Locked
      type: object
      required:
      - total_tenants
      - total_users
      - total_portfolios
      - total_loans
      - total_value_locked
      title: SystemStats
    TenantCreate:
      properties:
        name:
          type: string
          title: Name
        slug:
          type: string
          title: Slug
        admin_email:
          type: string
          format: email
          title: Admin Email
        admin_first_name:
          type: string
          title: Admin First Name
        admin_last_name:
          type: string
          title: Admin Last Name
        plan_name:
          type: string
          title: Plan Name
          default: core
      type: object
      required:
      - name
      - slug
      - admin_email
      - admin_first_name
      - admin_last_name
      title: TenantCreate
    TenantRegistrationRequest:
      properties:
        company_name:
          type: string
          maxLength: 100
          minLength: 2
          title: Company Name
        industry:
          type: string
          maxLength: 50
          minLength: 2
          title: Industry
        country:
          type: string
          maxLength: 2
          minLength: 2
          title: Country
        preferred_accounting_standard:
          type: string
          enum:
          - IFRS9
          - IFRS9_BOG
          title: Preferred Accounting Standard
        first_name:
          type: string
          maxLength: 50
          minLength: 1
          title: First Name
        last_name:
          type: string
          maxLength: 50
          minLength: 1
          title: Last Name
        email:
          type: string
          format: email
          title: Email
        phone_number:
          type: string
          maxLength: 20
          minLength: 7
          title: Phone Number
        job_role:
          type: string
          maxLength: 50
          minLength: 2
          title: Job Role
        password:
          type: string
          maxLength: 128
          minLength: 8
          title: Password
      type: object
      required:
      - company_name
      - industry
      - country
      - preferred_accounting_standard
      - first_name
      - last_name
      - email
      - phone_number
      - job_role
      - password
      title: TenantRegistrationRequest
    TenantResponse:
      properties:
        id:
          type: integer
          title: Id
        name:
          type: string
          title: Name
        slug:
          type: string
          title: Slug
        is_active:
          type: boolean
          title: Is Active
        created_at:
          type: string
          format: date-time
          title: Created At
        user_count:
          type: integer
          title: User Count
        portfolio_count:
          type: integer
          title: Portfolio Count
      type: object
      required:
      - id
      - name
      - slug
      - is_active
      - created_at
      - user_count
      - portfolio_count
      title: TenantResponse
    TenantUpdate:
      properties:
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        is_active:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Is Active
      type: object
      title: TenantUpdate
    Token:
      properties:
        access_token:
          type: string
          title: Access Token
        token_type:
          type: string
          title: Token Type
      type: object
      required:
      - access_token
      - token_type
      title: Token
    TransactionInitialize:
      properties:
        amount:
          type: integer
          title: Amount
          description: Amount in GHS (smallest currency unit)
        reference:
          anyOf:
          - type: string
          - type: 'null'
          title: Reference
        callback_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Callback Url
        plan:
          anyOf:
          - type: string
          - type: 'null'
          title: Plan
        metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Metadata
      type: object
      required:
      - amount
      title: TransactionInitialize
    UploadedFiles:
      properties:
        loan_details:
          anyOf:
          - $ref: '#/components/schemas/LoanDetailsFile'
          - type: 'null'
        client_data:
          anyOf:
          - $ref: '#/components/schemas/ClientDataFile'
          - type: 'null'
        loan_guarantee_data:
          anyOf:
          - $ref: '#/components/schemas/LoanGuaranteeDataFile'
          - type: 'null'
        loan_collateral_data:
          anyOf:
          - $ref: '#/components/schemas/LoanCollateralDataFile'
          - type: 'null'
      type: object
      required:
      - loan_details
      - client_data
      - loan_guarantee_data
      - loan_collateral_data
      title: UploadedFiles
    UserBase:
      properties:
        id:
          type: integer
          title: Id
        email:
          type: string
          title: Email
        first_name:
          anyOf:
          - type: string
          - type: 'null'
          title: First Name
        last_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Name
      type: object
      required:
      - id
      - email
      title: UserBase
    UserBasic:
      properties:
        id:
          type: integer
          title: Id
        first_name:
          anyOf:
          - type: string
          - type: 'null'
          title: First Name
        last_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Name
        email:
          type: string
          title: Email
      type: object
      required:
      - id
      - email
      title: UserBasic
      description: Basic user information for feedback response
    UserCreate:
      properties:
        first_name:
          anyOf:
          - type: string
          - type: 'null'
          title: First Name
        last_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Name
        email:
          type: string
          format: email
          title: Email
        recovery_email:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: Recovery Email
        role:
          $ref: '#/components/schemas/UserRole'
          default: user
        is_active:
          type: boolean
          title: Is Active
          default: true
        portfolio_id:
          anyOf:
          - type: integer
          - type: 'null'
          title: Portfolio Id
      type: object
      required:
      - email
      title: UserCreate
    UserModel:
      properties:
        id:
          type: integer
          title: Id
        first_name:
          anyOf:
          - type: string
          - type: 'null'
          title: First Name
        last_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Name
        email:
          type: string
          format: email
          title: Email
        recovery_email:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: Recovery Email
        role:
          $ref: '#/components/schemas/UserRole'
        is_active:
          type: boolean
          title: Is Active
        access_request_status:
          anyOf:
          - $ref: '#/components/schemas/RequestStatus'
          - type: 'null'
      type: object
      required:
      - id
      - email
      - role
      - is_active
      title: UserModel
    UserResponse:
      properties:
        id:
          type: integer
          title: Id
        first_name:
          anyOf:
          - type: string
          - type: 'null'
          title: First Name
        last_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Name
        email:
          type: string
          format: email
          title: Email
        recovery_email:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: Recovery Email
        role:
          $ref: '#/components/schemas/UserRole'
        is_active:
          type: boolean
          title: Is Active
        created_at:
          type: string
          format: date-time
          title: Created At
        last_login:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Last Login
        updated_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Updated At
      type: object
      required:
      - id
      - email
      - role
      - is_active
      title: UserResponse
    UserRole:
      type: string
      enum:
      - super_admin
      - admin
      - analyst
      - reviewer
      - user
      title: UserRole
    UserUpdate:
      properties:
        first_name:
          anyOf:
          - type: string
          - type: 'null'
          title: First Name
        last_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Name
        email:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: Email
        recovery_email:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: Recovery Email
        role:
          anyOf:
          - $ref: '#/components/schemas/UserRole'
          - type: 'null'
        is_active:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Is Active
      type: object
      title: UserUpdate
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
  securitySchemes:
    OAuth2PasswordBearer:
      type: oauth2
      flows:
        password:
          scopes: {}
          tokenUrl: token
